<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../../../support/css/physcomp.css" />
    <title>Exercise: 3pi in Serial Slave mode</title>
  </head>
  <body>
    <h2>Exercise: 3pi in Serial Slave mode</h2>
<h4>Objective</h4>

    <p>When developing more complex application that require additional I/O, more computation capabilities, or communication protocols not supported by the 3pi (e.g. SPI, I2C), it is helpful to use the 3pi as a <a href="https://www.pololu.com/docs/0J21/10.a">Serial Slave</a> of another microcontroller. According to the documentation: &quot;This slave program receives serial data on port PD0 (RX) of the 3pi and transmits responses (when necessary) on port PD1 (TX), using a 115.2 kbaud, TTL-level serial protocol.Â &quot;    </p>
    <p>In this exercise, we will create a robot that will move away if you touch it.</p>
    <h4>Steps and observations</h4>
    <ol>
      <li>Load the Serial Slave program onto your 3Pi Robot</li>
      <li>Devise a way to mount a traditional Arduino (an &quot;Uno&quot;) onto the 3Pi robot; consider building a parallel plate that mounts on top of the 3pi robot, held up with long machine screws and plastic spacers.</li>
      <li>Connect the I2C gyro/accelerometer from your course kit to the Uno; create a sketch and reads the accellerometer values from this sensor. </li>
      <li>Extend the program so that when the accellerometer readings from the sensor show movements  above a certain threshold, the Uno sends serial commands to the 3Pi robot to make it move away. Refer to the table on <a href="https://www.pololu.com/docs/0J21/10.a">this page from the Pololu site</a> for references on the commands you can send to the 3Pi robot over serial, using the<a href="https://www.arduino.cc/en/Reference/SoftwareSerial"> SoftwareSerial</a> library (the built in SoftwareSerialExample sketch is a good reference as well). If you instead use the built in Serial library with the regular TX/RX pins, you may have issues uploading the sketch.</li>
      <li>Connect the TX pin of the 3pi to the RX pin you defined in the sketch. Connect the RX pin of the 3pi to the TX pin you defined in the
      	  sketch. If you keep the defaults that are in the SoftwareSerialExample sketch, you would connect the TX pin of the 3pi to pin 10 of the Uno
      	  and the RX pin of the 3pi to pin 11 of the Uno.</li>
      <li>Experiment with different choreographies of &quot;moving away&quot;, for instance: a quick/jerky move, and then a 180-degree turn</li></ol>

    <h4>Comments</h4>

    <p>This execise involves integrating a number of important lessons from the past exercises into a single applicaiton. These include serial communitation, I2C protocol f or sensing, and designing systems with variable time-based behavior.</p>
    <p>In order to add additional components to the 3Pi, it's best to create a 2nd level on top of the robot. This can be achieved by laser cutting hardboard or plexi in the shape of the 3Pi's base, and mounting this second plate to the 3Pi using hardware. Please see the link below for a digital drawing of the right shape</p>
    <h4>Other Files</h4>
    <ol>
      <li><a href="https://www.pololu.com/docs/0J21/9">Pololu 3pi Components and Pin Assignment Table</a></li>
      <li>Drawings of a 3Pi base plate: <a href="../support/3pi-shield-shelf.dxf">DXF</a>, <a href="../support/3pi-shield-shelf.dwg">DWG</a>, <a href="../support/3pi-shield-shelf.AI">Illustrator</a> (AI), <a href="../support/3pi-shield-shelf.3dm">Rhino</a> (3dm), <a href="../support/3pi Shield.SLDPRT">Soldworks</a> (SLDPRT)</li>
    </ol>
  </body>
</html>
